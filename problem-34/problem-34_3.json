[
  {
    "operation": "shift",
    "spec": {
      "name": "name",
      "hobby_*": "hobbies[#2].&(0,1).name",
      "level_*": "hobbies[#2].&(0,1).level"
    }
  },
  {
    "operation": "shift",
    "spec": {
      "name": "&",
      "hobbies": {
        "*": {
          "*": {
            "@": "&3[#2]"
          }
        }
      }
    }
  }
]