[
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "orders": {
        "*": {
          "customer": {
            "fullName": "=concat(@(1,firstName),' ',@(1,lastName))",
            "address": "=concat(@(0,street),', ',@(0,city),', ',@(0,state),' ',@(0,zip))"
          },
          "items": {
            "*": {
              "inverse": "=divide(1, @(1,quantity))",
              "intPrice": "=divide(@(1,price), @(1,quantityInverse))",
              "price": "=toDouble"
            }
          }
        }
      }
    }
  },
  {
    "operation": "shift",
    "spec": {
      "orders": {
        "*": {
          "items": {
            "*": {
              "totalQuantity": "&4.[#4].total[]"
            }
          },
          "@": "&2.[&]"
        }
      }
    }
  },
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "orders": {
        "*": {
          "total": "=doubleSum(@(1,total))"
        }
      }
    }
  },
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "orders": {
        "*": {
          "total": "=doubleSum(@(1,total))"
        }
      }
    }
  },
  {
    "operation": "remove",
    "spec": {
      "orders": {
        "*": {
          "customer": {
            "firstName": "",
            "lastName": ""
          },
          "items": {
            "*": {
              "inverse": "",
              "intPrice": ""
            }
          }
        }
      }
    }
  }
]
