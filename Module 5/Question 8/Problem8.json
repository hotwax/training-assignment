Input Json
{
    "employees": [
        {
            "name": "John Doe",
            "salary": 50000,
            "department": "Sales"
        },
        {
            "name": "Jane Smith",
            "salary": 60000
        },
        {
            "name": "Bob Johnson",
            "department": "IT"
        }
    ]
}


Json spec
[
    {
        "operation": "modify-default-beta",
        "spec": {
            "employees": {
                "[0]": {
                    "bonus": 1000,
                    "tempBonus": 1000
                },
                "[1]": {
                    "bonus": 1500,
                    "tempBonus": 1500
                },
                "[2]": {
                    "bonus": 900,
                    "tempBonus": 900
                }
            }
        }
    },
    {
        "operation": "shift",
        "spec": {
            "employees": {
                "*": {
                    "*": "employees[&1].&",
                    "tempBonus": "totalBonus[]"
                }
            }
        }
    },
    {
        "operation": "modify-overwrite-beta",
        "spec": {
            "totalBonus": "=intSum(@(1,totalBonus))"
        }
    }
]



Output Json

{
    "employees": [
        {
            "name": "John Doe",
            "salary": 50000,
            "department": "Sales"
        },
        {
            "name": "Jane Smith",
            "salary": 60000,
            "department": "Marketing"
        },
        {
            "name": "Bob Johnson",
            "department": "IT",
            "salary": "45000"
        }
    ]
}