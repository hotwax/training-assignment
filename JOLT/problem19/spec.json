[
  {
    "operation": "shift",
    "spec": {
      "products": {
        "*": {
          "id": {
            "1001": {
              "@2": "products[]"
            },
            "*": {
              "@2": "products[&3].product[]"
            }
          }
        }
      }
    }
    },
  {
    "operation": "modify-overwrite-beta",
    "spec": {
      "products": {
        "*": {
          "product": {
            "*": {
              "price": "=doubleSum(@(1,price),@(1,price))"
            }
          }
        }
      }
    }
    }, {
    "operation": "shift",
    "spec": {
      "products": {
        "*": {
          "*": "products[&1].&",
          "product": {
            "*": {
              "*": "products[&3].&"
            }
          }
        }
      }
    }
    }
  ]